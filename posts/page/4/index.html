<!DOCTYPE html>
<html>
  <head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta http-equiv="Cache-control" content="public">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <!-- Load favicon -->
  <link rel="shortcut icon" type="image/png" href="/images/beach-line.png"> 

  <title>Douglas Duhaime - Posts</title>
  <meta name="description" content="Working notes on data mining and early book history.">

  <!-- Main CSS -->
  <link rel="stylesheet" href="/css/duhaime.css" media="screen,projection" />

  <!-- Google Font -->
  <link href='https://fonts.googleapis.com/css?family=Open+Sans:400,700&subset=latin-ext' rel='stylesheet' type='text/css'>

  <!-- Syntax highlighting and css -->
  <link rel="stylesheet" type="text/css" href="/css/prism.css">

  <link rel="canonical" href="http://yourdomain.com/posts/page/4/">

  <link rel="alternate" type="application/rss+xml" title="Douglas Duhaime" href="http://yourdomain.com/feed.xml">
</head>

  <script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-71035937-1', 'auto');
  ga('send', 'pageview');

</script>

  
  <body> 
    <div id="coverImage"></div>
  <div class="hero" style="background-image: url('/images/cover_images/jefferys_banner.png')">
    <h1 class="display_title">Douglas Duhaime</h1>
  </div>

  <div class="container menu">
    <ul>
      <li><a href="/">Posts</a></li>
      <li><a href="/about">About</a></li
      <li><a href="/secret">Secret</a></li>
    </ul>
  <hr />
</div>

    
    <div class="container content">
      <div class="posts">
  
  <article class="post">
    <h1 class="post-title">
      <a href="/posts/identifying-poetry-in-unstructured-corpora">
        Identifying Poetry in Unstructured Corpora
      </a>
    </h1>

    <time datetime=May 5, 2014" class="date">May 5, 2014</time>

    <p>Over the last few months, I’ve been working with colleagues at Notre Dame to develop computational approaches we can use to identify the genres to which a literary work belongs. Initially, we focused our research on the georgic, a class of agricultural-cum-labour poems that flourished in the seventeenth and eighteenth centuries. Eventually, though, our limited research corpus led us to investigate methods we could use to identify more period poetry, and these investigations helped reveal a fascinating if simple method one can use to identify poetic works in unstructured corpora.</p>

<p>We began building our corpus of early modern English poetry by identifying the poetry curated by the Text Creation Partnership (TCP). Running a simple Python script over the TCP’s selections from the Early English Books (EEBO) corpus—which stretches from “the first book printed in English in 1475 through 1700”—and the Eighteenth Century Collections (ECCO) corpus, we extracted all the lines of text wrapped in <code class="highlighter-rouge">&lt;l&gt;</code> tags (the <a href="http://www.tei-c.org/release/doc/tei-p5-doc/en/html/REF-ELEMENTS.html">TEI designation</a> for a line of verse). This left us with 16,571 text files, each of which contained only poetry from roughly the sixteenth through the eighteenth centuries. After examining some of these files, we realized that many consisted entirely of poetic epigraphs, so we used another script to remove all of these small files (those smaller than 16 kb) from our research corpus, leaving us with a fairly substantive collection of poetic works from the period of interest:</p>

<p><img class="center-image" src="/images/post_images/identifying_poetry_in_unstructured_corpora/eebo_ecco_tcp_poetry.jpg" /></p>

<p>Because the EEBO-TCP contains 44,255 volumes—roughly one third of all titles recorded in <a href="http://estc.ucr.edu/ESTCStatistics.html">Alain Veylit’s ESTC data</a> for the appropriate years—we felt reasonably confident that our holdings for the sixteenth and seventeenth centuries were fairly representative of literary trends during the period. The ECCO-TCP, on the other hand, contains only 2,387 texts, less than one percent of ESTC titles from the eighteenth century. Even if we accept <a href="http://library.oxfordjournals.org/content/s6-VIII/1/32.full.pdf">John Feather’s argument</a> that only 25,131 literary works were written in English during the eighteenth century—11,789 of which, he claims, were poetic works—we are left to conclude that the 1,698 files in the ECCO-TCP corpus that contain poetry might not be indicative of poetic trends from the period. Given these conclusions, we were eager to supplement our collection of eighteenth-century poetry.</p>

<p>But where on earth can one find enormous quantities of eighteenth-century poetry in digital form? (This isn’t meant to be a rhetorical question; if you’ve got ideas, please let us know!) After considering the issue for some time, we elected to work with Project Gutenberg. Unfortunately, only after we had <a href="http://webapps.stackexchange.com/questions/12311/how-to-download-all-english-books-from-gutenberg">downloaded</a> and unzipped all of the English files on Project Gutenberg did we realize that the enormous text collection (roughly 45,000 volumes) is all but entirely unstructured. We couldn’t find any master list of file names, author names, publication dates, or any other essential metadata fields, so we had to build our own.</p>

<p>In the first place, we wanted to be able to differentiate poetic texts from non-poetic texts. While I imagine it would be possible to complete this task by analyzing the relative frequency of strings from each of these texts in the manner described in the previous post, we didn’t have reliable publication dates for the Gutenberg texts, so we needed an alternative method. Operating on the hypothesis that poetic texts have more line breaks and fewer words per line than prose works, we decided to measure the number of words in each line of each file. We then collected a random sample of poetic works to see what their words-per-line profiles looked like:</p>

<p><img class="center-image" src="/images/post_images/identifying_poetry_in_unstructured_corpora/gutenberg_poetry.jpg" /></p>

<p>In these plots—each of which represents a single poetic text—the numbers along the x-axis indicate the number of words in a line of the text file, and the y-axis indicates the relative frequency of lines that contain such-and-such a number of words within the text. In <i>The Poetical Works of James Beattie</i>, for instance, only ~5% of lines had 12 or 13 words in them, whereas almost 20% of the text’s lines had 7 or 8 words in them. In other words, <i>The Poetical Works of James Beattie</i> is dominated by lines with seven or eight words in them, a fact that applies to all of the poetic works plotted above. With these figures in hand, we plotted the words-per-line profiles for a random assortment of prose works from roughly the same period:</p>

<p><img class="center-image" src="/images/post_images/identifying_poetry_in_unstructured_corpora/gutenberg_prose.jpg" /></p>

<p>We were pleased to see that these plots differed from the poetic plots quite dramatically! Comparing the two sets of curves, we see that poetic works contain a preponderance of lines with 7-8 words, while prose works contain a preponderance of lines with 11-12 words. This is naturally due to the fact that lines of text in prose works run across an entire page, while poets break lines strategically (and regularly in eighteenth-century verse). To identify poetry in unstructured corpora, then, we can calculate a text’s words-per-line profile, and use the results of those calculations in order to classify each text in our corpus as a work of poetry or a work of prose. Using a rather simple approach to the latter task, we found 3150 poetic works tucked in the Gutenberg corpus, a few hundred of which are from our period and can thus contribute to our study of genre classification.</p>


  </article>
  
  <article class="post">
    <h1 class="post-title">
      <a href="/posts/ngram-frequency-and-eighteenth-century-commonplaces">
        Ngram Frequency and Eighteenth-Century Commonplaces
      </a>
    </h1>

    <time datetime=March 13, 2014" class="date">March 13, 2014</time>

    <p>When Samuel Richardson’s Mrs. Jewkes remarks that “Nought can restrain consent of twain,” we confidently conclude she’s quoting Harington’s translation of <i>Orlando Furioso</i>. When Edmund Burke writes in his <i>Philosophical Enquiry</i>, “Dark with excessive light thy skirts appear,” we know he’s misquoting Milton. While passages like these make their debts fairly clear, though, in most cases literary influence is notoriously difficult to trace. When Mary Wollstonecraft identifies marriage as a form of “legal prostitution” in her Vindications, for instance, are we meant to reflect on the thrust of that phrase in Defoe’s <i>Matrimonial Whoredom</i>? When Ann Radcliffe’s Adeline and La Motte stroll “under the shade of ‘melancholy boughs’” in The <i>Romance of the Forest</i>, what gives us the warrant to imagine Orlando “under the shade of melancholy boughs” in <i>As You Like It</i>?</p>

<p>In each of the aforementioned cases, both the quoting and the quoted texts include identical (or nearly-identical) sequences of words. If this property is a necessary condition for intertextuality, however, it is clearly not a sufficient one, for while Wollstonecraft’s second <i>Vindication and Defoe’s <i>Matrimonial Whoredom</i> both use the phrase “legal prostitution,” they also both use the phrase “if it be,” as well as the phrase “a kind of.” Nonetheless, literary scholars don’t identify the latter two strings as instances of intertextuality, perhaps because we intuitively sense that “if it be” and “a kind of” are far more common phrases during the period than “legal prostitution,” a thesis to which Google lends some confidence:</i></p>

<p><img class="center-image" src="/images/post_images/ngram_freuency_and_eighteenth_century_commonplaces/defoe_wollstonecraft.jpg" /></p>

<p>Such queries demonstrate something literary scholars have known for a long time, namely the fact that the passages we classify as instances of intertextuality have (1) common words in a common order, and (2) significantly lower relative frequency rates than other (equally long) strings from the same period. With this insight in mind, I built an API for the Google Ngrams data with which one can pull down the relative frequencies of a list of strings shared by two (or more) works. Given a set of substrings shared by two texts, and given the relative frequencies of each of those strings in the age during which those texts were published, one can eliminate high frequency strings and thereby reduce the number of passages scholars must hand review to identify relevant instances of intertextuality.</p>

<p>Although I developed the Ngram API to eliminate high frequency strings from the output of my sequence alignment routines, it eventually helped me to discover an interesting correlation between the relative frequency of n-grams and instances of intertextuality. This discovery unfolded in the following way. On a whim, I decided to examine the relative frequencies of bigrams across passages from a few canonical works published during the long eighteenth century: Henry Fielding’s <i>Joseph Andrews</i> (1742),  Edmund Burke’s <i>Enquiry</i> (1757), and Maria Edgeworth’s <i>Ennui</i> (1809). Each of the selections that I drew from these texts centers on a quotation of another writer—the Fielding passage quotes Virgil’s <i>Aeneid</i>, the Burke passage quotes Shakespeare’s <i>Henry V</i>, and the Edgeworth passage quotes Voltaire’s “La Bégueule.” I broke each of these passages down into a set of sequential bigrams, and submitted each of the bigrams to the Google Ngrams data via the API described above. In the case of Burke, for example, I fired up the API and entered the following data into the input fields:</p>

<p><img class="center-image" src="/images/post_images/ngram_freuency_and_eighteenth_century_commonplaces/google_ngram_api.png" /></p>

<p>After identifying these parameters and clicking “Go!”, I watched the tool navigate to the Google Ngram site and search for the relative frequency of the first two words in the Burke passage. The API limits the historical scope of this search to the period between 1752 and 1762 (the user-provided publication date of Burke’s text plus and minus five years), because the Google Ngram data is a bit noisy, and we don’t want anomalies in the data for 1757 to skew our sense of the bigram’s relative frequency in the period. The API then calculates the mean value for the bigram’s relative frequency across those years, and it writes the bigram, the publication year, and the calculated relative frequency to an output file. It then looks at the next bigram (containing words two and three), and reiterates the process, continuing in this fashion until it has queried all valid ngrams in the input file.</p>

<p>Preliminary analysis suggests that one can then use this output file to identify instances of intertextuality, <i>even in cases in which one does not have access to the referenced text</i>. (This task is referred to as “intrinsic plagiarism detection” within related scholarship.) Using the aforementioned selections from eighteenth-century texts, I used the method described above to calculate the relative frequencies of the bigrams in each of those selections. I then plotted the bigram frequencies with R’s scatter.smooth() function—identifying the first bigram in the selection as bigram number one, the second bigram as bigram number two, and so forth across the x-axis—so that I could better identify the trends in bigram frequency across each passage. I was surprised by the results (click to enlarge):</p>

<div class="inline-trio">
  <a class="img-link-wrapper" href="/images/post_images/ngram_freuency_and_eighteenth_century_commonplaces/fielding_bigrams.jpg" data-lightbox="bigrams" data-title="">
    <img class="img-link" src="/images/post_images/ngram_freuency_and_eighteenth_century_commonplaces/fielding_bigrams.jpg" alt="Fielding Bigrams" />
  </a>

  <a class="img-link-wrapper" href="/images/post_images/ngram_freuency_and_eighteenth_century_commonplaces/burke_bigrams.jpg" data-lightbox="bigrams" data-title="">
    <img class="img-link" src="/images/post_images/ngram_freuency_and_eighteenth_century_commonplaces/burke_bigrams.jpg" alt="Burke Bigrams" />
  </a>

  <a class="img-link-wrapper" href="/images/post_images/ngram_freuency_and_eighteenth_century_commonplaces/edgeworth_bigrams.jpg" data-lightbox="bigrams" data-title="">
    <img class="img-link" src="/images/post_images/ngram_freuency_and_eighteenth_century_commonplaces/edgeworth_bigrams.jpg" alt="Edgeworth Bigrams" />
  </a>
</div>

<p>In each case, the local minimum of the regression line centers on the instance of intertextuality in the queried passage! While this trend is promising, though, it could be due to a number of causes. Chief among these are the differences in language and historical period that divide each of the “quoting” texts cited above from the passage that that work quotes. As we noted above, Henry Fielding quotes Virgil, Burke quotes Shakespeare, and Edgeworth quotes Voltaire, all in the original languages. When we compare the relative frequency of bigrams in Latin, French, and Elizabethan English with bigrams written in colloquial English of the mid- to late-eighteenth century, then, we should perhaps not be surprised that the latter tend to be more common in the Ngram data from that period, ceteris paribus.</p>

<p>These initial results yield new questions: Can the method described above identify instances of poetry in works of prose from a particular period? Can such a method be integrated into an ensemble approach to intertextuality, or do these graphs merely contain a half-told truth, mysterious to descry, which in the womb of distant causes lie? Such are the questions I hope to pursue in subsequent work.</p>

  </article>
  
</div>



<div class="pagination center-text">
  <ul>
    
      
        <li>
          <a href="/page3">&laquo;</a>
        </li>
      

    

    
      <li>
        <a href="/">1</a>
      </li>
    
    
      
        <li>
          <a href="/posts/page/2">2</a>
        </li>
      
    
      
        <li>
          <a href="/posts/page/3">3</a>
        </li>
      
    
      
        <li class="active">
          <a href="#">4</a>
        </li>
      
    
    
      <li class="disabled">
        <a href="#">&raquo;</a>
      </li>
    
  </ul>
</div>



    </div>

    <footer class="site-footer">
  <div class="wrapper">
    <ul class="social-media-list">

    
      <style>
.icon--github path {
  fill: black
}
</style>

<a href="https://github.com/duhaime" style="text-decoration: none">
  <span class="icon icon--github" id="github-icon"><svg viewBox="0 0 16 16"><path fill="#828282" d="M7.999,0.431c-4.285,0-7.76,3.474-7.76,7.761 c0,3.428,2.223,6.337,5.307,7.363c0.388,0.071,0.53-0.168,0.53-0.374c0-0.184-0.007-0.672-0.01-1.32 c-2.159,0.469-2.614-1.04-2.614-1.04c-0.353-0.896-0.862-1.135-0.862-1.135c-0.705-0.481,0.053-0.472,0.053-0.472 c0.779,0.055,1.189,0.8,1.189,0.8c0.692,1.186,1.816,0.843,2.258,0.645c0.071-0.502,0.271-0.843,0.493-1.037 C4.86,11.425,3.049,10.76,3.049,7.786c0-0.847,0.302-1.54,0.799-2.082C3.768,5.507,3.501,4.718,3.924,3.65 c0,0,0.652-0.209,2.134,0.796C6.677,4.273,7.34,4.187,8,4.184c0.659,0.003,1.323,0.089,1.943,0.261 c1.482-1.004,2.132-0.796,2.132-0.796c0.423,1.068,0.157,1.857,0.077,2.054c0.497,0.542,0.798,1.235,0.798,2.082 c0,2.981-1.814,3.637-3.543,3.829c0.279,0.24,0.527,0.713,0.527,1.437c0,1.037-0.01,1.874-0.01,2.129 c0,0.208,0.14,0.449,0.534,0.373c3.081-1.028,5.302-3.935,5.302-7.362C15.76,3.906,12.285,0.431,7.999,0.431z"/></svg>
</span>
</a>

    

    
      <style>
.icon--twitter path {
  fill: #42C0FB 
}
</style>

<a href="https://twitter.com/douglasduhaime" style="text-decoration: none">
  <span class="icon icon--twitter"><svg viewBox="0 0 16 16"><path fill="#828282" d="M15.969,3.058c-0.586,0.26-1.217,0.436-1.878,0.515c0.675-0.405,1.194-1.045,1.438-1.809c-0.632,0.375-1.332,0.647-2.076,0.793c-0.596-0.636-1.446-1.033-2.387-1.033c-1.806,0-3.27,1.464-3.27,3.27 c0,0.256,0.029,0.506,0.085,0.745C5.163,5.404,2.753,4.102,1.14,2.124C0.859,2.607,0.698,3.168,0.698,3.767 c0,1.134,0.577,2.135,1.455,2.722C1.616,6.472,1.112,6.325,0.671,6.08c0,0.014,0,0.027,0,0.041c0,1.584,1.127,2.906,2.623,3.206 C3.02,9.402,2.731,9.442,2.433,9.442c-0.211,0-0.416-0.021-0.615-0.059c0.416,1.299,1.624,2.245,3.055,2.271 c-1.119,0.877-2.529,1.4-4.061,1.4c-0.264,0-0.524-0.015-0.78-0.046c1.447,0.928,3.166,1.469,5.013,1.469 c6.015,0,9.304-4.983,9.304-9.304c0-0.142-0.003-0.283-0.009-0.423C14.976,4.29,15.531,3.714,15.969,3.058z"/></svg>
</span>
</a>

    

    </ul>
  </div>
</footer>

<!--Load assets here for async behavior-->
<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>

<!-- prism js must come after content -->
<script src="/js/prism.js"></script>

<!-- lightbox assets -->
<link href="/css/lightbox.css" rel='stylesheet' type='text/css'>
<script src="/js/lightbox.js"></script>

  </body>

</html>
